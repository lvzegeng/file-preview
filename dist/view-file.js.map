{"version":3,"file":"view-file.js","sources":["../src/text.js","../src/verifyData.js"],"sourcesContent":["import verifyData from \"./verifyData\";\nimport nprogress from \"nprogress\";\nimport \"nprogress/nprogress.css\";\n\nimport \"./text.css\";\n\nexport default function index(param) {\n  verifyData(param);\n\n  let data = param;\n  if (typeof param === \"string\") {\n    data = { url: param };\n  }\n\n  const { url, method = \"get\", container = \"body\", showDownload = true } = data;\n\n  nprogress.configure({ parent: container });\n  nprogress.start();\n\n  let blob;\n\n  fetch(url, {\n    method\n  })\n    .then(data => {\n      const cloneData = data.clone();\n      blob = cloneData.blob();\n      return data.text();\n    })\n    .then(data => {\n      const dom = document.createElement(\"div\");\n      dom.innerText = data;\n      dom.className = \"view-file-text\";\n\n      if (showDownload) {\n        const btn = document.createElement(\"a\");\n        btn.innerText = \"下载\";\n        btn.download = \"\";\n        btn.className = \"view-file-text-btn\";\n        blob.then(data => {\n          btn.href = URL.createObjectURL(data);\n        });\n        dom.appendChild(btn);\n      }\n\n      document.querySelector(container).appendChild(dom);\n    })\n    .finally(() => {\n      nprogress.done();\n    });\n}\n","export default function verifyData(param) {\n  if (typeof param === \"string\") {\n  } else if (Object.prototype.toString.call(param) === \"[object Object]\") {\n    if (!param.url) {\n      throw \"属性 url 不可为空\";\n    }\n  } else {\n    throw \"参数只能是字符串或对象\";\n  }\n}\n"],"names":["param","Object","prototype","toString","call","url","verifyData","data","blob","nprogress","configure","parent","container","start","fetch","method","then","cloneData","clone","text","dom","document","createElement","innerText","className","showDownload","btn","download","href","URL","createObjectURL","appendChild","querySelector","finally","done"],"mappings":"kIAMe,SAAeA,ICNf,SAAoBA,MACZ,iBAAVA,OACJ,CAAA,GAA8C,oBAA1CC,OAAOC,UAAUC,SAASC,KAAKJ,QAKlC,kBAJDA,EAAMK,SACH,eDGVC,CAAWN,OAEPO,EAAOP,EACU,iBAAVA,IACTO,EAAO,CAAEF,IAAKL,IAGRK,sCAAc,wCAAmB,YAKrCG,mCAL4D,GAEhEC,EAAUC,UAAU,CAAEC,OAAQC,IAC9BH,EAAUI,QAIVC,MAAMT,EAAK,QACTU,IAECC,cAAKT,OACEU,EAAYV,EAAKW,eACvBV,EAAOS,EAAUT,OACVD,EAAKY,SAEbH,cAAKT,OACEa,EAAMC,SAASC,cAAc,UACnCF,EAAIG,UAAYhB,EAChBa,EAAII,UAAY,iBAEZC,EAAc,KACVC,EAAML,SAASC,cAAc,KACnCI,EAAIH,UAAY,KAChBG,EAAIC,SAAW,GACfD,EAAIF,UAAY,qBAChBhB,EAAKQ,cAAKT,GACRmB,EAAIE,KAAOC,IAAIC,gBAAgBvB,KAEjCa,EAAIW,YAAYL,GAGlBL,SAASW,cAAcpB,GAAWmB,YAAYX,KAE/Ca,mBACCxB,EAAUyB"}