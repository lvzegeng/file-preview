!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.viewFile=n()}(this,function(){"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,n=(function(e,n){e.exports=function(){var e,n,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function i(e,n,t){return e<n?n:e>t?t:e}function o(e){return 100*(-1+e)}t.configure=function(e){var n,t;for(n in e)void 0!==(t=e[n])&&e.hasOwnProperty(n)&&(r[n]=t);return this},t.status=null,t.set=function(e){var n=t.isStarted();e=i(e,r.minimum,1),t.status=1===e?null:e;var u=t.render(!n),c=u.querySelector(r.barSelector),l=r.speed,d=r.easing;return s(function(n){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),a(c,function(e,n,t){var i;return(i="translate3d"===r.positionUsing?{transform:"translate3d("+o(e)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(e)+"%,0)"}:{"margin-left":o(e)+"%"}).transition="all "+n+"ms "+t,i}(e,l,d)),1===e?(a(u,{transition:"none",opacity:1}),setTimeout(function(){a(u,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){t.remove(),n()},l)},l)):setTimeout(n,l)}),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var e=function(){setTimeout(function(){t.status&&(t.trickle(),e())},r.trickleSpeed)};return r.trickle&&e(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var n=t.status;return n?("number"!=typeof e&&(e=(1-n)*i(Math.random()*n,.1,.95)),n=i(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},e=0,n=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&t.start(),e++,n++,r.always(function(){0==--n?(e=0,t.done()):t.set((e-n)/e)}),this):this},t.render=function(e){if(t.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=r.template;var i,s=n.querySelector(r.barSelector),u=e?"-100":o(t.status||0),l=document.querySelector(r.parent);return a(s,{transition:"all 0 linear",transform:"translate3d("+u+"%,0,0)"}),r.showSpinner||(i=n.querySelector(r.spinnerSelector))&&f(i),l!=document.body&&c(l,"nprogress-custom-parent"),l.appendChild(n),n},t.remove=function(){l(document.documentElement,"nprogress-busy"),l(document.querySelector(r.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&f(e)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var s=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),a=function(){var e=["Webkit","O","Moz","ms"],n={};function t(t,r,i){var o;o=(o=r).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,n){return n.toUpperCase()}),r=n[o]||(n[o]=function(n){var t=document.body.style;if(n in t)return n;for(var r,i=e.length,o=n.charAt(0).toUpperCase()+n.slice(1);i--;)if((r=e[i]+o)in t)return r;return n}(o)),t.style[r]=i}return function(e,n){var r,i,o=arguments;if(2==o.length)for(r in n)void 0!==(i=n[r])&&n.hasOwnProperty(r)&&t(e,r,i);else t(e,o[1],o[2])}}();function u(e,n){return("string"==typeof e?e:d(e)).indexOf(" "+n+" ")>=0}function c(e,n){var t=d(e),r=t+n;u(t,n)||(e.className=r.substring(1))}function l(e,n){var t,r=d(e);u(e,n)&&(t=r.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function d(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function f(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return t}()}(e={exports:{}}),e.exports);return function(e){!function(e){if("string"==typeof e);else{if("[object Object]"!==Object.prototype.toString.call(e))throw"参数只能是字符串或对象";if(!e.url)throw"属性 url 不可为空"}}(e);var t=e;"string"==typeof e&&(t={url:e});var r=t.url,i=t.method;void 0===i&&(i="get");var o=t.container;void 0===o&&(o="body");var s,a=t.showDownload;void 0===a&&(a=!0),n.configure({parent:o}),n.start(),fetch(r,{method:i}).then(function(e){var n=e.clone();return s=n.blob(),e.text()}).then(function(e){var n=document.createElement("div");if(n.innerText=e,n.className="view-file-text",a){var t=document.createElement("a");t.innerText="下载",t.download="",t.className="view-file-text-btn",s.then(function(e){t.href=URL.createObjectURL(e)}),n.appendChild(t)}document.querySelector(o).appendChild(n)}).finally(function(){n.done()})}});
//# sourceMappingURL=view-file.umd.js.map
