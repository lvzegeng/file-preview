import e from"nprogress";import"nprogress/nprogress.css";export default function(t){!function(e){if("string"!=typeof e){if("[object Object]"!==Object.prototype.toString.call(e))throw"参数只能是字符串或对象";if(!e.url)throw"属性 url 不可为空"}}(t);var n=t;"string"==typeof t&&(n={url:t});var o=n.url,r=n.method;void 0===r&&(r="get");var i=n.container;void 0===i&&(i="body");var a,c=n.showDownload;void 0===c&&(c=!0),e.configure({parent:i}),e.start(),fetch(o,{method:r}).then(function(e){var t=e.clone();return a=t.blob(),e.text()}).then(function(e){var t=document.createElement("div");if(t.innerText=e,t.className="view-file-text",c){var n=document.createElement("a");n.innerText="下载",n.download="",n.className="view-file-text-btn",a.then(function(e){n.href=URL.createObjectURL(e)}),t.appendChild(n)}document.querySelector(i).appendChild(t)}).finally(function(){e.done()})}
//# sourceMappingURL=view-file.mjs.map
